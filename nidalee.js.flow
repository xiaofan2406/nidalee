/* @flow */
// all HTML button attributes are supported
export type Size = 'small' | 'regular' | 'large';
export type ButtonProps = {
  +children: React$Node,

  +primary: boolean,
  +size: Size,
  +color: string,
  +showSpinner: boolean,

  +innerRef?: (ref: ?HTMLButtonElement) => void,
};
export type ButtonDefaultProps = {|
  +primary: boolean,
  +size: Size,
  +color: string,
  +showSpinner: boolean,
|};

export type DialogPosition = 'top' | 'middle' | 'bottom';
export type DialogProps = {
  +opener: string | React$Node,
  +children: React$Node,

  +showOverlay: boolean,
  +position: DialogPosition,

  +open?: boolean,
};
export type DialogState = {|
  isVisible: boolean,
|};

export type EditableAction = 'save' | 'cancel';
export type EditableProps = {
  +value: string,
  +onSave: (content: string) => void,

  +placeholder: string,
  +className: string,
  +inline: boolean,
  +autoTrim: boolean,
  +blurAction: EditableAction,
  +escAction: EditableAction,

  +onKeyDown?: (event: KeyboardEvent) => void,
  +onBlur?: (event: FocusEvent) => void,
  +onDoubleClick?: (event: MouseEvent) => void,
};
export type EditableState = {|
  isEditing: boolean,
|};

export type PopoverTrigger = 'onClick' | 'onDoubleClick';
export type PopoverAlign = 'left' | 'right';
export type PopoverDirection = 'top' | 'bottom';
export type PopoverProps = {
  +opener: string | React$Node,
  +children: React$Node,

  +trigger: PopoverTrigger,
  +align: PopoverAlign,
  +direction: PopoverDirection,
  +zIndex: number,

  +open?: boolean,
  +className?: string,
};
export type PopoverState = {|
  isVisible: boolean,
|};

export type PortalProps = {|
  +children: React$Node,
  +className?: string,
|};

declare module 'nidalee' {
  declare export class Button extends React$Component<ButtonProps> {
    static defaultProps: ButtonDefaultProps;
  }

  declare export class Dialog extends React$Component<
    DialogProps,
    DialogState
  > {
    static defaultProps: {|
      +showOverlay: boolean,
      +position: DialogPosition,
    |};
  }

  declare export class Editable extends React$Component<
    EditableProps,
    EditableState
  > {
    static defaultProps: {|
      +placeholder: string,
      +className: string,
      +inline: boolean,
      +autoTrim: boolean,
      +blurAction: EditableAction,
      +escAction: EditableAction,
    |};
  }

  declare export class Popover extends React$Component<
    PopoverProps,
    PopoverState
  > {
    static defaultProps: {|
      +trigger: PopoverTrigger,
      +align: PopoverAlign,
      +direction: PopoverDirection,
      +zIndex: number,
    |};
  }

  declare export class Portal extends React$Component<PortalProps> {}
}
